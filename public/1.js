(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{10:function(t,i,e){var a=e(172);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};e(5)(a,s);a.locals&&(t.exports=a.locals)},171:function(t,i,e){"use strict";var a=e(10);e.n(a).a},172:function(t,i,e){(t.exports=e(4)(!1)).push([t.i,".mifuente{font-size:1.3vw;font-weight:700}",""])},175:function(t,i,e){"use strict";e.r(i);var a={data:function(){return{switchNavegator:!1,ip:"",familias:"",buttonKeys:[{accion:"cocina",icon:"mdi-pot-steam"},{accion:"anotacion",icon:"mdi-note-text-outline"},{accion:"precuenta",icon:"mdi-cash-register"}],articulos:[],articlesEnMesa:[],mesa:"",mesaId:"",total:"",config:"",dialog:!1,noteCmd:"",numcomen:0,cantidad:0,userID:0,pin:void 0,disableMinusBtn:!1}},computed:{artList:function(){return this.articlesEnMesa}},created:function(){this.familias=JSON.parse(this.$store.getters.getFAMILIAS),this.mesa=JSON.parse(this.$store.getters.get_MESA_ACTUAL),this.mesaId=this.$store.getters.get_ID_MESA_ACTUAL,this.userID=this.$store.getters.getUSERID,this.config=JSON.parse(this.$store.getters.getCONFIG_AXIOS),this.getArticlesinMesa()},methods:{getArticles:function(t){this.articulos=[],this.articulos=t.menus},getArticlesinMesa:function(){var t=this;axios.post("api/tablet/comanda/item/listar",{id_mesa:this.mesaId},this.config).then((function(i){var e=i.data;"Ok"==e.msg?(t.articlesEnMesa=e.prod,t.total=e.total):Swal.fire({title:"Advertencia!",text:e.msg,icon:"warning",confirmButtonText:"OK"})})).catch((function(i){i.response?401===i.response.status&&t.sesionCaducada():i.request}))},addToMesa:function(t,i){var e=this;axios.post("api/tablet/comanda/item/agregar ",{id_mesa:this.mesaId,id_producto:t.id},this.config).then((function(t){var i=t.data;"Ok"==i.msg?(e.articlesEnMesa=i.prod,e.total=i.total):Swal.fire({title:"Advertencia!",text:i.msg,icon:"warning",confirmButtonText:"OK"})})).catch((function(t){t.response?401===t.response.status&&e.sesionCaducada():t.request}))},addNote:function(){var t=this;axios.post("api/tablet/comanda/nota",{id_mesa:this.mesaId,nota:this.noteCmd},this.config).then((function(i){var e=i.data;t.dialog=!1,"OK"==e.msg?t.noteCmd="":(console.log(e),t.noteCmd="",Swal.fire({title:"Advertencia!",text:e.msg,icon:"warning",confirmButtonText:"OK"}))})).catch((function(t){console.log(t)}))},alterList:function(t,i){var e=1;switch(i){case"minus":this.disableMinusBtn=!0,e=-1,1==t.print&&t.increment<1?this.swalValidator(this.mesaId,t.idprod,t.id,e):this.consultaAlterarLista(this.mesaId,t.idprod,t.id,e);break;case"remove":e=0,"remove"==i&&1==t.print?this.swalValidator(this.mesaId,t.idprod,t.id,e):this.consultaAlterarLista(this.mesaId,t.idprod,t.id,e);break;default:this.consultaAlterarLista(this.mesaId,t.idprod,t.id,e)}},consultaAlterarLista:function(t,i,e,a){var s=this,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",r="api/tablet/comanda/item/alterar";axios.post(r,{id_mesa:t,id_producto:i,id_detalle:e,cantidad:a,restring:n,auth:o},this.config).then((function(t){var i=t.data;s.disableMinusBtn=!1,"Ok"==i.msg?(s.articlesEnMesa=i.prod,s.total=i.total):Swal.fire({title:"Advertencia!",text:i.msg,icon:"warning",confirmButtonText:"OK"})})).catch((function(t){s.disableMinusBtn=!1,t.response?401===t.response.status&&s.sesionCaducada():t.request||Swal.fire({title:"Advertencia!",text:t.message.msg,icon:"warning",confirmButtonText:"OK"})}))},actionButton:function(t){switch(t){case"cocina":this.sendKitchen();break;case"precuenta":this.sendPrecuenta();break;case"anotacion":this.dialog=!0}},sendKitchen:function(){var t=this,i=this.$store.getters.getUSERNAME,e=this.$store.getters.getSTORE_ID;axios.post("api/tablet/comanda/imprimir/cocina",{id_mesa:this.mesaId,mesa:this.mesa.nombre,mozo:i,user_id:this.userID,tipo:"cocina",shop_id:e},this.config).then((function(i){var e=i.data;"OK"==e.msg?(Swal.fire({title:"Enviado a cocina!",text:e.msg,icon:"success",confirmButtonText:"OK"}),t.salir()):Swal.fire({title:"Advertencia!",text:e.msg,icon:"warning",confirmButtonText:"OK"})})).catch((function(i){i.response&&401===i.response.status&&t.sesionCaducada()}))},sendPrecuenta:function(){var t=this,i=0;if(this.articlesEnMesa.forEach((function(t){t.increment>0&&i++})),0==i){var e=this.$store.getters.getUSERNAME;axios.post("api/tablet/comanda/imprimir/precuenta",{id_mesa:this.mesaId,mesa:this.mesa.nombre,mozo:e,user_id:this.userID,tipo:"precuenta"},this.config).then((function(i){var e=i.data;"OK"==e.msg?(t.$router.push({name:"Home"}),t.articlesEnMesa=e.prod,t.total=e.total):Swal.fire({title:"Advertencia!",text:e.msg,icon:"warning",confirmButtonText:"OK"})})).catch((function(i){i.response&&401===i.response.status&&t.sesionCaducada()}))}else Swal.fire({title:"Advertencia!",text:"Tiene detalles sin eliminar a cocina, eliminelos o envielos a cocina",icon:"warning",confirmButtonText:"OK"})},salir:function(){var t=this;axios.post("api/tablet/comanda/liberar",{id_mesa:this.mesaId},this.config).then((function(i){var e=i.data;"Ok"==e.msg?t.$router.push({name:"Home"}):Swal.fire({title:"Advertencia!",text:e.msg,icon:"warning",confirmButtonText:"OK"}).then((function(i){i.value&&t.$router.push({name:"Home"})}))})).catch((function(t){console.log(t)}))},sesionCaducada:function(){Swal.fire({title:"Advertencia!",text:"La sesion ha caducado",icon:"warning",confirmButtonText:"OK"}),this.$store.commit("SET_PIN",null),this.$router.push({name:"Login"})},swalMessage:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Advertencia!",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"warning";Swal.fire({title:i,text:t,icon:e,confirmButtonText:"Ok"})},swalValidator:function(t,i,e,a){var s=this;Swal.fire({title:"Esta accion requiere autorizaci√≥n",input:"text",inputValue:"",showCancelButton:!0,inputValidator:function(n){if(!n)return"Necesitas ingresar el pin de un administrador!";s.consultaAlterarLista(t,i,e,a,!0,n)}}).then((function(t){t.dismiss===Swal.DismissReason.cancel&&(s.disableMinusBtn=!1)})).value}}},s=(e(171),e(1)),n=Object(s.a)(a,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-app",[e("v-navigation-drawer",{attrs:{app:"",permanent:"",fixed:"",clipped:"",width:"35vw",height:"70vh"}},t._l(t.artList,(function(i,a){return e("v-list-item",{key:a,staticClass:"pl-2 pr-2"},[e("v-list-item-action",{staticClass:"mr-2"},[e("div",[e("v-btn",{attrs:{color:"primary",fab:"","x-small":"",dark:"",disabled:t.disableMinusBtn},on:{click:function(e){return t.alterList(i,"minus")}}},[e("v-icon",[t._v("mdi-minus")])],1),t._v("\n          "+t._s(i.cant)+"\n          "),e("v-btn",{attrs:{color:"primary",fab:"","x-small":"",dark:""},on:{click:function(e){return t.alterList(i,"plus")}}},[e("v-icon",[t._v("mdi-plus")])],1)],1)]),t._v(" "),e("v-list-item-content",[e("v-list-item-subtitle",[e("small",[e("b",{staticClass:"mifuente"},[t._v(t._s(i.name))])])])],1),t._v(" "),e("v-list-item-action",{staticClass:"ml-2"},[e("v-btn",{attrs:{color:"red",fab:"","x-small":"",dark:""},on:{click:function(e){return t.alterList(i,"remove")}}},[e("v-icon",[t._v("mdi-delete")])],1)],1)],1)})),1),t._v(" "),e("v-app-bar",{attrs:{app:"","clipped-left":"",height:"35vh"}},[e("v-toolbar-title",[e("strong",[t._v(t._s(t.mesa.nombre))])]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"warning"},on:{click:t.salir}},[e("v-icon",[t._v("mdi-arrow-left-bold")])],1)],1),t._v(" "),e("v-main",{attrs:{app:"",height:"40vh"}},[e("v-toolbar",{attrs:{dense:"","min-width":"65vw"}},[e("v-slide-group",{attrs:{multiple:"","show-arrows":""}},t._l(t.familias,(function(i,a){return e("v-slide-item",{key:a,scopedSlots:t._u([{key:"default",fn:function(a){var s=a.active;return[e("v-btn",{staticClass:"ma-2 white--text card card-block",attrs:{tile:"","input-value":s,color:"light-blue darken-4"},on:{click:function(e){return t.getArticles(i)}}},[t._v(t._s(i.name))])]}}],null,!0)})})),1)],1),t._v(" "),e("perfect-scrollbar",[e("v-card",{staticClass:"d-flex flex-wrap",attrs:{flat:"",tile:""}},t._l(t.articulos,(function(i,a){return e("v-card",{key:a,staticClass:"pa-2 mt-4 ml-4",attrs:{color:"orange lighten-4",dark:"",width:"10rem",height:"8rem"},on:{click:function(e){return t.addToMesa(i,a)}}},[e("v-card-text",{staticClass:"black--text",staticStyle:{height:"5rem!important"}},[t._v(t._s(i.name))]),t._v(" "),e("v-card-actions",{staticClass:"black"},[e("strong",[t._v("S/."+t._s(i.total))])])],1)})),1)],1)],1),t._v(" "),e("v-footer",{staticClass:"text--accent-3",attrs:{app:"",fixed:"",height:"40vh"}},[e("strong",{staticClass:"subheading"},[t._v("Total: S/."+t._s(t.total))]),t._v(" "),e("v-spacer"),t._v(" "),t._l(t.buttonKeys,(function(i){return e("v-btn",{key:i.accion,staticClass:"mr-3 mt-0",attrs:{color:"primary"},on:{click:function(e){return t.actionButton(i.accion)}}},[e("v-icon",{attrs:{large:""}},[t._v(t._s(i.icon))])],1)}))],2),t._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(i){t.dialog=i},expression:"dialog"}},[e("v-card",[e("v-card-text",{staticClass:"p-0"},[e("v-container",{staticClass:"pt-0 pb-0"},[e("v-row",[e("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12"}},[e("v-text-field",{staticClass:"centered-input display-1",attrs:{label:"Ingrese nota de comanda",type:"text",rules:[function(t){return!!t||"Ingrese una nota"}],required:""},model:{value:t.noteCmd,callback:function(i){t.noteCmd=i},expression:"noteCmd"}})],1)],1)],1)],1),t._v(" "),e("v-card-actions",{staticClass:"pt-0 pb-0"},[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"error",text:""},on:{click:function(i){t.dialog=!1}}},[t._v("Close")]),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addNote}},[t._v("Save")])],1)],1)],1)],1)}),[],!1,null,null,null);i.default=n.exports}}]);